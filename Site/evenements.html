<!DOCTYPE html>
<link href="css/animate.css" rel="stylesheet">
<html>
    <body>
        <div id="app" class="events">

          <trier>
            <input></input>
            <SELECT>
              
            </SELECT>
          </trier>

          <event>
            <div v-for="e in listeEvent" class="event" @click="choix(e)">{{e.nom}}</div>
          </event>

          <div v-if="SelectedEvent != null" class="info">
          
            <div v-if="image"><img style="width:50%;height: 50%;max-width:400px;max-height: 400px;" :src="image" alt=""></div>     
            <div>
              <ul>
                <li>Nom :  {{SelectedEvent.nom}}</li>
                <li>Date : {{SelectedEvent.date}}</li>
                <li>Description : {{SelectedEvent.description}}</li>
                <li>Heure : {{SelectedEvent.heure}}</li>
              </ul>
            </div>
          <div>
            <button>Reserver</button>
          </div>


          </div>
            
        </div>
      </body>
</html>






<script src="https://unpkg.com/vue@3"></script>
<script>

    Vue.createApp({
      data() {
        return {        
          listeEvent:[],
          listeLieu:[],
          SelectedEvent:null,
          image:null
        }
      },
      methods: {
        choix(e){
          this.SelectedEvent = e;
          this.image = e.image;
        }
      },
      mounted(){

        fetch("http://127.0.0.1:8000/evenements/", {
            method : "GET"
          })
          .then(lieu=>lieu.json(),event=>event.json())
          .then(event => this.listeEvent=event.results, lieu => this.listeLieu=lieu.results)
          .then(console.log(this.listeLieu))
          }

          

          

    }).mount('#app')
  </script>